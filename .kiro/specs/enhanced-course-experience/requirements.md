# Requirements Document

## Introduction

Улучшение качества генерации теоретического контента и пользовательского интерфейса курсов в AI Study Agent до уровня roadmap.sh. Фокус на структурированной теории, навигации с модулями и отслеживании прогресса.

## Glossary

- **Theory_Generator**: Компонент, генерирующий теоретический контент модуля через LLM
- **Course_Navigation**: Боковая панель с иерархией модулей и уроков курса
- **Progress_Tracker**: Система отслеживания прогресса пользователя по урокам
- **Lesson**: Отдельный урок внутри модуля курса
- **Highlight**: Визуальное выделение ключевых терминов и понятий в тексте

## Requirements

### Requirement 1: Улучшенная генерация теории

**User Story:** Как студент, я хочу получать структурированный теоретический контент с выделенными ключевыми понятиями, чтобы легче усваивать материал.

#### Acceptance Criteria

1. WHEN Theory_Generator генерирует контент THEN THE System SHALL разбивать текст на короткие параграфы (максимум 4 предложения)
2. WHEN Theory_Generator генерирует контент THEN THE System SHALL выделять ключевые термины специальной разметкой для подсветки
3. WHEN Theory_Generator генерирует формулы THEN THE System SHALL включать пошаговый вывод с реальными числовыми примерами
4. WHEN Theory_Generator генерирует примеры THEN THE System SHALL использовать реальные значения и единицы измерения
5. WHEN Theory_Generator генерирует контент THEN THE System SHALL структурировать материал по секциям: Введение, Основные понятия, Как это работает, Примеры, Частые ошибки, Итоги

### Requirement 2: Боковая навигация с модулями

**User Story:** Как студент, я хочу видеть структуру курса в боковой панели, чтобы легко переключаться между модулями и уроками.

#### Acceptance Criteria

1. WHEN пользователь открывает страницу курса THEN THE Course_Navigation SHALL отображать иерархический список модулей слева
2. WHEN пользователь просматривает Course_Navigation THEN THE System SHALL показывать вложенные уроки внутри каждого модуля
3. WHEN пользователь кликает на модуль THEN THE Course_Navigation SHALL разворачивать/сворачивать список уроков
4. WHEN пользователь находится на уроке THEN THE Course_Navigation SHALL выделять текущий урок визуально
5. WHEN модуль содержит завершённые уроки THEN THE Course_Navigation SHALL показывать иконку завершения рядом с уроком

### Requirement 3: Прогресс-бар по урокам

**User Story:** Как студент, я хочу видеть свой прогресс по урокам внутри модуля, чтобы понимать сколько осталось изучить.

#### Acceptance Criteria

1. WHEN пользователь открывает урок THEN THE Progress_Tracker SHALL отображать прогресс-бар с этапами: Теория → Практика → Готово
2. WHEN пользователь завершает секцию теории THEN THE Progress_Tracker SHALL обновлять прогресс-бар до этапа "Практика"
3. WHEN пользователь завершает практику THEN THE Progress_Tracker SHALL обновлять прогресс-бар до этапа "Готово"
4. WHEN пользователь просматривает модуль THEN THE Progress_Tracker SHALL показывать процент завершения модуля
5. WHEN пользователь завершает все уроки модуля THEN THE Progress_Tracker SHALL отмечать модуль как завершённый

### Requirement 4: Выделение ключевых понятий

**User Story:** Как студент, я хочу видеть выделенные ключевые термины в тексте, чтобы быстро находить важную информацию.

#### Acceptance Criteria

1. WHEN Theory_Generator генерирует контент THEN THE System SHALL размечать ключевые термины тегом ==термин==
2. WHEN UI рендерит контент с разметкой ==термин== THEN THE System SHALL отображать термин с жёлтым фоном
3. WHEN пользователь наводит на выделенный термин THEN THE System SHALL показывать краткое определение в tooltip
4. WHEN модуль содержит глоссарий THEN THE System SHALL связывать выделенные термины с определениями из глоссария

### Requirement 5: Структура уроков внутри модуля

**User Story:** Как студент, я хочу чтобы каждый модуль был разбит на отдельные уроки, чтобы изучать материал порционно.

#### Acceptance Criteria

1. WHEN Constructor_Agent создаёт модуль THEN THE System SHALL генерировать 3-7 уроков на модуль
2. WHEN урок генерируется THEN THE System SHALL ограничивать длину урока до 5-10 минут чтения
3. WHEN урок содержит теорию THEN THE System SHALL включать 1-2 ключевых концепции на урок
4. WHEN пользователь завершает урок THEN THE System SHALL автоматически предлагать следующий урок
5. WHEN пользователь возвращается к курсу THEN THE System SHALL открывать последний незавершённый урок

### Requirement 6: Сохранение прогресса

**User Story:** Как студент, я хочу чтобы мой прогресс сохранялся, чтобы продолжить обучение с того места где остановился.

#### Acceptance Criteria

1. WHEN пользователь завершает урок THEN THE Progress_Tracker SHALL сохранять статус в базу данных
2. WHEN пользователь открывает курс THEN THE System SHALL загружать сохранённый прогресс
3. WHEN пользователь не авторизован THEN THE System SHALL сохранять прогресс в localStorage
4. WHEN пользователь авторизуется THEN THE System SHALL синхронизировать прогресс из localStorage с базой данных
